<?xml version="1.0" encoding="utf-8"?>
<!--
  Copyright 2014-2019 Akretion (http://www.akretion.com/)
  @author Alexis de Lattre <alexis.delattre@akretion.com>
  Copyright 2016-2019 Sodexis
  License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
-->

<odoo>

<record id="product_template_only_form_view" model="ir.ui.view">
    <field name="name">rental.template.product.form</field>
    <field name="model">product.template</field>
    <field name="inherit_id" ref="product.product_template_only_form_view" />
    <field name="arch" type="xml">
        <xpath expr="//field[@name='can_be_expensed']/.." position="after">
            <field name="rental" string="Can be Rental" />
            <label for="rental">Can be Rental</label>
        </xpath>
        <xpath expr="//field[@name='taxes_id']" position="before">
            <field name="rental_guarantee_price" widget="monetary" attrs="{'invisible':[('rental','=',False)]}"/>
        </xpath>
    </field>
</record>

<record id="product_normal_form_view" model="ir.ui.view">
    <field name="name">rental.product.product.form</field>
    <field name="model">product.product</field>
    <field name="inherit_id" ref="product.product_normal_form_view" />
    <field name="arch" type="xml">
        <xpath expr="//field[@name='can_be_expensed']/.." position="after">
            <field name="rental" string="Can be Rental"/>
            <label for="rental">Can be Rental</label>
        </xpath>
        <xpath expr="//field[@name='taxes_id']" position="before">
        </xpath>
        <xpath expr="//page[2]" position='after'>
	    	<page string='Rental'>
                <group name="rental-service" string="Rental" col="3">
                    <field name="rented_product_id"/>
                    <field name="rental_guarantee_price" widget="monetary" attrs="{'invisible':[('rental','=',False)]}"/>
                </group>
                <group name="rental-product"
                    string="Rental Services" col="1">
                    <field name="rental_service_ids" nolabel="1" attrs="{'invisible': [('rental_service_ids', '=', [])]}"/>
                    <button type="action"
                        name="%(sale_rental.create_rental_product_action)d"
                           string="Create Rental Service" />
                </group>
            </page>
	    </xpath>
    </field>
</record>


</odoo>
